{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="rui-sticky-header--wrapper" style="height: 25px;">
  <header class="rui-sticky-header site-header main-menu-component">
    <div class="main-menu-component__wrapper">
      <nav class="app-top-bar">
        <img src="{% static '6a45b8b4-958f-4e2c-87fb-4308aea49476.png' %}" alt="" style="display: none;">
        <div>Hi {{ user.first_name }} {{ user.last_name }}!</div>
        <div><a href="{% url 'logout' %}">Log Out</a></div>
      </nav>
    </div>
  </header>
</div>


<body>
  <div class="rui-sticky-header--wrapper" style="height: 25px;">
    <header class="rui-sticky-header site-header main-menu-component">
      <div class="main-menu-component__wrapper">
        <nav class="app-top-bar">
          <img src="{% static '6a45b8b4-958f-4e2c-87fb-4308aea49476.png' %}" alt="" style="display: none;">
          <div>Hi {{ user.first_name }} {{ user.last_name }}!</div>
          <div><a href="{% url 'logout' %}">Log Out</a></div>
        </nav>
      </div>
    </header>
  </div>



  <div class="page-full-screen" style="width: 95%; margin: auto;">
    <div class="rui-card edit-object-main single-column create-single-card">
      <div class="rui-card-content">
        <div class="rui-grid-row container">
          <div class="create-object-header edit-object-header">
            <div class="form-title-evaluation">
              <div class="edit-object-form-title">
                <h2 class="form-title-text">My incidents</h2>
              </div>
            </div>
          </div>
        </div>
        <div class="rui-grid-row edit-object-body container">
          <div class="rui-grid-column gr-12">
            <div class="object-form-component">
              <div class="rui-grid-row configurable-form-root container">
                <div class="rui-grid-column form-section-component section-depth-0 gr-12 no-gutter">
                  <div class="rendered-section">
                    <div class="rui-grid-row form-section-container container">
                      <div class="rui-grid-column form-section-component section-depth-4 gr-12 no-gutter">
                        <div class="rui-card">
                          <div class="rui-card-content">
                            <div class="rendered-section">
                              <div class="rui-grid-row form-section-container container">
                                <div class="rendered-section">
                                  <div class="components">
                                    <div class="form-component">
                                      <div class="virgin field-evaluation-component">
                                        <div class="rui-combobox">
                                          <div class="rui-combobox__wrapper">
                                            <h4><span>H&S incidents</span></h4>
                                            {% if incidents %}
                                            <table>
                                              <tr>
                                                <th>Name</th>
                                                <th>Date occurred</th>
                                                <th>Incident classification</th>
                                                <th>Location</th>
                                              </tr>
                                              {% for incident in incidents %}
                                              <tr>
                                                <th>
                                                  <a href="{% url 'hs_edit_form' id=incident.id %}">
                                                    {{ incident }}
                                                  </a>
                                                </th>
                                                <th>{{ incident.date_occurred }}</th>
                                                <th>{{ incident.incident_classification }}</th>
                                                <th>{{ incident.location }}</th>
                                              </tr>
                                              {% endfor %}
                                            </table>
                                            {% else %}
                                            <div>No incidents to display</div>
                                            {% endif %}
                                            <div class="rui-button rui-button--primary-link">
                                              <a href="{% url 'hs_create_form' %}">+ Create a new H&S incident</a>
                                            </div>
                                            <div>
                                              <span class="rui-paginate__counts">
                                                Incidents found: {{incidents|length}}
                                              </span>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
{% endblock %}